{"failedCount":0,"prefixedPath":"src\/test\/java\/features\/postLeads.feature","packageQualifiedName":"src.test.java.features.postLeads","loopIndex":-1,"relativePath":"src\/test\/java\/features\/postLeads.feature","scenarioResults":[{"sectionIndex":1,"stepResults":[{"result":{"nanos":14131709,"millis":14.131709,"status":"passed"},"step":{"endLine":13,"background":true,"line":5,"prefix":"*","docString":"function(path) {\n  var stream = karate.readAsStream(path);\n  var props = new java.util.Properties();\n  props.load(stream);\n  return props;\n}","index":0,"text":"def readProps ="}},{"result":{"nanos":27120875,"millis":27.120875,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":1,"text":"def props = readProps('file:src\/test\/resources\/utils\/karate.properties')"}},{"result":{"nanos":30566583,"millis":30.566583,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":2,"text":"def requestPayloadNew = read(props.payloadNew)"}},{"result":{"nanos":4171750,"millis":4.17175,"status":"passed"},"step":{"endLine":22,"comments":["# * def signIn = call read(props.bearerFeature)","# * def authToken = signIn.authToken"],"background":true,"line":19,"prefix":"*","docString":"function(max){ return Math.floor(Math.random() * max) }","index":3,"text":"def getRandomNum ="}},{"result":{"nanos":2216750,"millis":2.21675,"status":"passed"},"step":{"line":42,"prefix":"Given","index":0,"text":"url baseUrl"}},{"result":{"nanos":1374958,"millis":1.374958,"status":"passed"},"step":{"line":43,"prefix":"And","index":1,"text":"path props.leadsPath"}},{"result":{"nanos":271042,"millis":0.271042,"status":"passed"},"step":{"line":44,"prefix":"And","index":2,"text":"request requestPayloadNew"}},{"result":{"nanos":6064584,"millis":6.064584,"status":"passed"},"step":{"line":45,"prefix":"And","index":3,"text":"header Authorization = props.bearerName + 'eyJraWQiOiJMemxCeWp3bkxHR25EbFVkWFVsMVRhZk9tRlZ3U1c3UnppZVlrZ0lrRktrPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJmOGMzMmM4Mi05YTlmLTQxYzctYTMzOS0zNDg0ODE1MGRlNjMiLCJjdXN0b206b2NjdXBhdGlvbiI6IlRlc3QiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiZ2VuZGVyIjoiRiIsImN1c3RvbTpvcmdOYW1lIjoiTkEiLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9FWWV3NldaQjQiLCJwaG9uZV9udW1iZXJfdmVyaWZpZWQiOmZhbHNlLCJjb2duaXRvOnVzZXJuYW1lIjoiZjhjMzJjODItOWE5Zi00MWM3LWEzMzktMzQ4NDgxNTBkZTYzIiwiY3VzdG9tOmxvY2F0aW9uIjoiTkEiLCJvcmlnaW5fanRpIjoiNWZlYmI5NTAtNjU1Mi00NDMyLWE2ZGMtZTQxYjdmZDFiZTVjIiwiYXVkIjoiN3J2OTltNzhvMm02aDBua2RnNjZuNWJnYmEiLCJjdXN0b206dGVtcFVuaXQiOiJGIiwiZXZlbnRfaWQiOiJlYjEwYTdhNi0wOTEwLTQ3OGEtOTMzZS0xYWUyMjM5YWQxYmQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTY5MzMwNDM3NiwibmFtZSI6IkFudXNoYSIsInBob25lX251bWJlciI6Ijc5NzQ3MTE2MzgiLCJjdXN0b206b3JnSUQiOiJOQSIsImV4cCI6MTY5MzQ3MTMzMCwiaWF0IjoxNjkzNDY3NzMwLCJmYW1pbHlfbmFtZSI6IkQiLCJqdGkiOiIyZDU4NGVkNS1kNmFlLTRhNmMtOGQ4MS0zMjY2ZGY4ZTRhM2YiLCJlbWFpbCI6ImFudXNoYS5kaXdha2FyQGtpZGRvLmhlYWx0aCJ9.fkyhHXH9zmZY6sK1iYozM9jeIBlhVxoi3GYBDQgRaEPUIp9vR_X4BawX1jsM-gkg8OmY3PMU4Z6vto7WCPW4VRgVJ_jW15EKpZWS0ywuQUlFEAUIwmcV7yF6Q1RntfdtihmuHLt0uyc-tLOHA9vt9acDYJxq_D6kdVE6v85cvptAFG_nIodCNEciqdcQ_e4o1i5uV5AJ1zxHwn0Gh_aZ3T48unMr5Ttk-sYujPC-dOdHFj_TgwwJCx3oHE8bgdvDvjr0sqNAg1RH6mGPfESxtKnfxxifB1T8m80gRWw8yyU2nrKgqhfxX_5fJyULGXLovNo61dKOyQxvfs4y22LP-Q'"}},{"result":{"nanos":4544559625,"millis":4544.559625,"status":"passed"},"step":{"line":46,"prefix":"When","index":4,"text":"method post"},"stepLog":"13:17:20.575 request:\n1 > POST https:\/\/opcwb9o4ik.execute-api.us-east-1.amazonaws.com\/stage\/leads\n1 > Authorization: Bearer eyJraWQiOiJMemxCeWp3bkxHR25EbFVkWFVsMVRhZk9tRlZ3U1c3UnppZVlrZ0lrRktrPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJmOGMzMmM4Mi05YTlmLTQxYzctYTMzOS0zNDg0ODE1MGRlNjMiLCJjdXN0b206b2NjdXBhdGlvbiI6IlRlc3QiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiZ2VuZGVyIjoiRiIsImN1c3RvbTpvcmdOYW1lIjoiTkEiLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9FWWV3NldaQjQiLCJwaG9uZV9udW1iZXJfdmVyaWZpZWQiOmZhbHNlLCJjb2duaXRvOnVzZXJuYW1lIjoiZjhjMzJjODItOWE5Zi00MWM3LWEzMzktMzQ4NDgxNTBkZTYzIiwiY3VzdG9tOmxvY2F0aW9uIjoiTkEiLCJvcmlnaW5fanRpIjoiNWZlYmI5NTAtNjU1Mi00NDMyLWE2ZGMtZTQxYjdmZDFiZTVjIiwiYXVkIjoiN3J2OTltNzhvMm02aDBua2RnNjZuNWJnYmEiLCJjdXN0b206dGVtcFVuaXQiOiJGIiwiZXZlbnRfaWQiOiJlYjEwYTdhNi0wOTEwLTQ3OGEtOTMzZS0xYWUyMjM5YWQxYmQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTY5MzMwNDM3NiwibmFtZSI6IkFudXNoYSIsInBob25lX251bWJlciI6Ijc5NzQ3MTE2MzgiLCJjdXN0b206b3JnSUQiOiJOQSIsImV4cCI6MTY5MzQ3MTMzMCwiaWF0IjoxNjkzNDY3NzMwLCJmYW1pbHlfbmFtZSI6IkQiLCJqdGkiOiIyZDU4NGVkNS1kNmFlLTRhNmMtOGQ4MS0zMjY2ZGY4ZTRhM2YiLCJlbWFpbCI6ImFudXNoYS5kaXdha2FyQGtpZGRvLmhlYWx0aCJ9.fkyhHXH9zmZY6sK1iYozM9jeIBlhVxoi3GYBDQgRaEPUIp9vR_X4BawX1jsM-gkg8OmY3PMU4Z6vto7WCPW4VRgVJ_jW15EKpZWS0ywuQUlFEAUIwmcV7yF6Q1RntfdtihmuHLt0uyc-tLOHA9vt9acDYJxq_D6kdVE6v85cvptAFG_nIodCNEciqdcQ_e4o1i5uV5AJ1zxHwn0Gh_aZ3T48unMr5Ttk-sYujPC-dOdHFj_TgwwJCx3oHE8bgdvDvjr0sqNAg1RH6mGPfESxtKnfxxifB1T8m80gRWw8yyU2nrKgqhfxX_5fJyULGXLovNo61dKOyQxvfs4y22LP-Q\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 634\n1 > Host: opcwb9o4ik.execute-api.us-east-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/20.0.2)\n1 > Accept-Encoding: gzip,deflate\n{\"provider_id\":\"AutomationProvider\",\"provider_org_id\":\"90091\",\"patients\":[{\"patient\":{\"firstname\":\"AutomationPatient\",\"lastname\":\"Lastname\",\"gender\":\"Male\",\"dob\":\"asdf\",\"patient_email\":\"anusha.diwakar+ec6666@kiddo.health\",\"homePhone\":\"209-285-9852\",\"mobile\":\"505-518-3503\",\"address\":\"01Address\",\"state\":\"California\",\"zipCode\":\"95205\",\"medicalCondition\":[\"Asthma\",\"Diabetes\"],\"payer_id\":\"1234\"},\"emergencyContact\":{\"ecFirstName\":\"AutomationParent\",\"ecLastName\":\"Lastname\",\"ecHomePhone\":\"559-550-4091\",\"ecMobile\":\"916-988-2753\",\"ecWorkNumber\":\"256-622-1310\",\"ecEmail\":\"anusha.diwakar+ec6666@kiddo.health\",\"ecRelationship\":\"Guardian\"}}]}\n\n13:17:24.806 response time in milliseconds: 4226\n1 < 400\n1 < Date: Thu, 31 Aug 2023 07:47:29 GMT\n1 < Content-Type: application\/json\n1 < Content-Length: 884\n1 < Connection: keep-alive\n1 < x-amzn-RequestId: ddf77757-26b1-4d41-8b80-f4d771f05a59\n1 < Access-Control-Allow-Origin: *\n1 < Access-Control-Allow-Headers: Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token\n1 < x-amz-apigw-id: Kg_OQGveIAMEukw=\n1 < Access-Control-Allow-Methods: *\n1 < X-Amzn-Trace-Id: Root=1-64f0458e-321c044e3483bb990888ce61;Sampled=0;lineage=d8d2cf2e:0\n{\"status\": false, \"code\": 400, \"message\": \"\", \"data\": [], \"errors\": [{\"error_message\": \"Patient and lead already exist\", \"patient\": {\"_id\": \"64f04507100d25e696a00028\", \"id\": \"64f04507100d25e696a00028\", \"firstname\": \"AutomationPatient\", \"lastname\": \"Lastname\", \"gender\": \"Male\", \"dob\": \"asdf\", \"patient_email\": \"anusha.diwakar+ec6666@kiddo.health\", \"homePhone\": \"209-285-9852\", \"mobile\": \"505-518-3503\", \"address\": \"01Address\", \"state\": \"California\", \"zipCode\": \"95205\", \"medicalCondition\": [\"Asthma\", \"Diabetes\"], \"payer_id\": \"1234\", \"parent_id\": \"64d602846247cc7d50f88975\"}, \"lead\": {\"_id\": \"64d602846247cc7d50f88975\", \"ecFirstName\": \"ParFname\", \"ecLastName\": \"Parlname\", \"ecHomePhone\": \"asdfasd\", \"ecMobile\": \"asdfasdf\", \"ecWorkNumber\": \"asdfasdf\", \"ecEmail\": \"anusha.diwakar+ec6666@kiddo.health\", \"ecRelationship\": \"Father\", \"id\": \"64d602846247cc7d50f88975\"}}], \"pagination\": null}\n\n"},{"result":{"nanos":11934417,"millis":11.934417,"status":"passed"},"step":{"line":47,"prefix":"Then","index":5,"text":"status 400"}},{"result":{"nanos":23278958,"millis":23.278958,"status":"passed"},"step":{"line":48,"prefix":"And","index":6,"text":"match response.code == 400"}},{"result":{"nanos":2105625,"millis":2.105625,"status":"passed"},"step":{"line":50,"prefix":"Given","index":7,"text":"url baseUrl"}},{"result":{"nanos":8059417,"millis":8.059417,"status":"passed"},"step":{"line":51,"prefix":"*","index":8,"text":"def randomNum = getRandomNum(9999)"}},{"result":{"nanos":2128209,"millis":2.128209,"status":"passed"},"step":{"line":52,"prefix":"*","index":9,"text":"def patientEmail = requestPayloadNew.patients[0].patient.patient_email = props.domainEmail"}},{"result":{"nanos":1311041,"millis":1.311041,"status":"passed"},"step":{"line":53,"prefix":"*","index":10,"text":"def parentEmail = requestPayloadNew.patients[0].emergencyContact.ecEmail = patientEmail"}},{"result":{"nanos":523500,"millis":0.5235,"status":"passed"},"step":{"line":54,"prefix":"And","index":11,"text":"path props.leadsPath"}},{"result":{"nanos":153042,"millis":0.153042,"status":"passed"},"step":{"line":55,"prefix":"And","index":12,"text":"request requestPayloadNew"}},{"result":{"nanos":716667,"millis":0.716667,"status":"passed"},"step":{"line":56,"prefix":"And","index":13,"text":"header Authorization = props.bearerName + 'eyJraWQiOiJMemxCeWp3bkxHR25EbFVkWFVsMVRhZk9tRlZ3U1c3UnppZVlrZ0lrRktrPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJmOGMzMmM4Mi05YTlmLTQxYzctYTMzOS0zNDg0ODE1MGRlNjMiLCJjdXN0b206b2NjdXBhdGlvbiI6IlRlc3QiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiZ2VuZGVyIjoiRiIsImN1c3RvbTpvcmdOYW1lIjoiTkEiLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9FWWV3NldaQjQiLCJwaG9uZV9udW1iZXJfdmVyaWZpZWQiOmZhbHNlLCJjb2duaXRvOnVzZXJuYW1lIjoiZjhjMzJjODItOWE5Zi00MWM3LWEzMzktMzQ4NDgxNTBkZTYzIiwiY3VzdG9tOmxvY2F0aW9uIjoiTkEiLCJvcmlnaW5fanRpIjoiNWZlYmI5NTAtNjU1Mi00NDMyLWE2ZGMtZTQxYjdmZDFiZTVjIiwiYXVkIjoiN3J2OTltNzhvMm02aDBua2RnNjZuNWJnYmEiLCJjdXN0b206dGVtcFVuaXQiOiJGIiwiZXZlbnRfaWQiOiJlYjEwYTdhNi0wOTEwLTQ3OGEtOTMzZS0xYWUyMjM5YWQxYmQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTY5MzMwNDM3NiwibmFtZSI6IkFudXNoYSIsInBob25lX251bWJlciI6Ijc5NzQ3MTE2MzgiLCJjdXN0b206b3JnSUQiOiJOQSIsImV4cCI6MTY5MzQ3MTMzMCwiaWF0IjoxNjkzNDY3NzMwLCJmYW1pbHlfbmFtZSI6IkQiLCJqdGkiOiIyZDU4NGVkNS1kNmFlLTRhNmMtOGQ4MS0zMjY2ZGY4ZTRhM2YiLCJlbWFpbCI6ImFudXNoYS5kaXdha2FyQGtpZGRvLmhlYWx0aCJ9.fkyhHXH9zmZY6sK1iYozM9jeIBlhVxoi3GYBDQgRaEPUIp9vR_X4BawX1jsM-gkg8OmY3PMU4Z6vto7WCPW4VRgVJ_jW15EKpZWS0ywuQUlFEAUIwmcV7yF6Q1RntfdtihmuHLt0uyc-tLOHA9vt9acDYJxq_D6kdVE6v85cvptAFG_nIodCNEciqdcQ_e4o1i5uV5AJ1zxHwn0Gh_aZ3T48unMr5Ttk-sYujPC-dOdHFj_TgwwJCx3oHE8bgdvDvjr0sqNAg1RH6mGPfESxtKnfxxifB1T8m80gRWw8yyU2nrKgqhfxX_5fJyULGXLovNo61dKOyQxvfs4y22LP-Q'"}},{"result":{"nanos":2395834875,"millis":2395.834875,"status":"passed"},"step":{"line":57,"prefix":"When","index":14,"text":"method post"},"stepLog":"13:17:24.872 request:\n2 > POST https:\/\/opcwb9o4ik.execute-api.us-east-1.amazonaws.com\/stage\/leads\n2 > Authorization: Bearer eyJraWQiOiJMemxCeWp3bkxHR25EbFVkWFVsMVRhZk9tRlZ3U1c3UnppZVlrZ0lrRktrPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJmOGMzMmM4Mi05YTlmLTQxYzctYTMzOS0zNDg0ODE1MGRlNjMiLCJjdXN0b206b2NjdXBhdGlvbiI6IlRlc3QiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiZ2VuZGVyIjoiRiIsImN1c3RvbTpvcmdOYW1lIjoiTkEiLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9FWWV3NldaQjQiLCJwaG9uZV9udW1iZXJfdmVyaWZpZWQiOmZhbHNlLCJjb2duaXRvOnVzZXJuYW1lIjoiZjhjMzJjODItOWE5Zi00MWM3LWEzMzktMzQ4NDgxNTBkZTYzIiwiY3VzdG9tOmxvY2F0aW9uIjoiTkEiLCJvcmlnaW5fanRpIjoiNWZlYmI5NTAtNjU1Mi00NDMyLWE2ZGMtZTQxYjdmZDFiZTVjIiwiYXVkIjoiN3J2OTltNzhvMm02aDBua2RnNjZuNWJnYmEiLCJjdXN0b206dGVtcFVuaXQiOiJGIiwiZXZlbnRfaWQiOiJlYjEwYTdhNi0wOTEwLTQ3OGEtOTMzZS0xYWUyMjM5YWQxYmQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTY5MzMwNDM3NiwibmFtZSI6IkFudXNoYSIsInBob25lX251bWJlciI6Ijc5NzQ3MTE2MzgiLCJjdXN0b206b3JnSUQiOiJOQSIsImV4cCI6MTY5MzQ3MTMzMCwiaWF0IjoxNjkzNDY3NzMwLCJmYW1pbHlfbmFtZSI6IkQiLCJqdGkiOiIyZDU4NGVkNS1kNmFlLTRhNmMtOGQ4MS0zMjY2ZGY4ZTRhM2YiLCJlbWFpbCI6ImFudXNoYS5kaXdha2FyQGtpZGRvLmhlYWx0aCJ9.fkyhHXH9zmZY6sK1iYozM9jeIBlhVxoi3GYBDQgRaEPUIp9vR_X4BawX1jsM-gkg8OmY3PMU4Z6vto7WCPW4VRgVJ_jW15EKpZWS0ywuQUlFEAUIwmcV7yF6Q1RntfdtihmuHLt0uyc-tLOHA9vt9acDYJxq_D6kdVE6v85cvptAFG_nIodCNEciqdcQ_e4o1i5uV5AJ1zxHwn0Gh_aZ3T48unMr5Ttk-sYujPC-dOdHFj_TgwwJCx3oHE8bgdvDvjr0sqNAg1RH6mGPfESxtKnfxxifB1T8m80gRWw8yyU2nrKgqhfxX_5fJyULGXLovNo61dKOyQxvfs4y22LP-Q\n2 > Content-Type: application\/json; charset=UTF-8\n2 > Content-Length: 592\n2 > Host: opcwb9o4ik.execute-api.us-east-1.amazonaws.com\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/20.0.2)\n2 > Accept-Encoding: gzip,deflate\n{\"provider_id\":\"AutomationProvider\",\"provider_org_id\":\"90091\",\"patients\":[{\"patient\":{\"firstname\":\"AutomationPatient\",\"lastname\":\"Lastname\",\"gender\":\"Male\",\"dob\":\"asdf\",\"patient_email\":\"@kiddo.health\",\"homePhone\":\"209-285-9852\",\"mobile\":\"505-518-3503\",\"address\":\"01Address\",\"state\":\"California\",\"zipCode\":\"95205\",\"medicalCondition\":[\"Asthma\",\"Diabetes\"],\"payer_id\":\"1234\"},\"emergencyContact\":{\"ecFirstName\":\"AutomationParent\",\"ecLastName\":\"Lastname\",\"ecHomePhone\":\"559-550-4091\",\"ecMobile\":\"916-988-2753\",\"ecWorkNumber\":\"256-622-1310\",\"ecEmail\":\"@kiddo.health\",\"ecRelationship\":\"Guardian\"}}]}\n\n13:17:27.259 response time in milliseconds: 2386\n2 < 400\n2 < Date: Thu, 31 Aug 2023 07:47:31 GMT\n2 < Content-Type: application\/json\n2 < Content-Length: 561\n2 < Connection: keep-alive\n2 < x-amzn-RequestId: ad8510fb-9a07-41ec-a2e1-47a3d3c8ea31\n2 < Access-Control-Allow-Origin: *\n2 < Access-Control-Allow-Headers: Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token\n2 < x-amz-apigw-id: Kg_O0HJSoAMEoHA=\n2 < Access-Control-Allow-Methods: *\n2 < X-Amzn-Trace-Id: Root=1-64f04591-68e956fe57e79fe16bb6bed7;Sampled=0;lineage=d8d2cf2e:0\n{\"status\": false, \"code\": 400, \"message\": \"\", \"data\": [], \"errors\": [\"2 validation errors for ItemAdaptedRequest\", \"patient -> patient_email\", \"  There must be something before the @-sign. (type=value_error.emailsyntax)\", \"emergencyContact -> ecEmail\", \"  There must be something before the @-sign. (type=value_error.emailsyntax)\", [{\"field\": \"patient -> patient_email\", \"error_message\": \"There must be something before the @-sign.\"}, {\"field\": \"emergencyContact -> ecEmail\", \"error_message\": \"There must be something before the @-sign.\"}]], \"pagination\": null}\n\n"},{"result":{"nanos":53208,"millis":0.053208,"status":"passed"},"step":{"line":58,"prefix":"Then","index":15,"text":"status 400"}},{"result":{"nanos":6507292,"millis":6.507292,"status":"passed"},"step":{"line":59,"prefix":"And","index":16,"text":"match response.code == 400"}}],"executorName":"main","line":40,"name":"Create record with existing parent and patient data","description":"","durationMillis":7083.084127,"startTime":1693468040017,"failed":false,"refId":"[2:40]","endTime":1693468047274,"exampleIndex":-1}],"callDepth":0,"name":"Post Leads API","description":"","resultDate":"2023-08-31 01:17:27 pm","durationMillis":7083.084127,"passedCount":1}